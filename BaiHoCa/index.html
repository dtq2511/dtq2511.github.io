<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Bể Cá Hoàn Chỉnh</title>

    <style>
      /* ====== GIAO DIỆN CHUNG ====== */
      body {
        background: #87ceeb;
        display: flex;
        justify-content: center;
        padding-top: 20px;
        font-family: sans-serif;
      }

      .aquarium {
        width: 900px;
        height: 500px;
        background: #5dade2;
        border: 12px solid #1b4f72;
        border-radius: 25px;
        position: relative;
        overflow: hidden;
      }

      /* ====== ÁNH SÁNG DƯỚI NƯỚC ====== */
      .light {
        position: absolute;
        width: 350px;
        height: 350px;
        background: radial-gradient(rgba(255, 255, 255, 0.3), transparent 70%);
        top: -80px;
        left: 200px;
        animation: lightMove 6s infinite ease-in-out;
      }
      @keyframes lightMove {
        0% {
          transform: translateX(-40px);
        }
        50% {
          transform: translateX(40px);
        }
        100% {
          transform: translateX(-40px);
        }
      }

      /* ===== THỢ LẶN ===== */
      .diver {
        width: 220px;
        position: absolute;
        top: 120px;
      }

      /* ===== CÁ ===== */
      .fish {
        width: 120px;
        position: absolute;
      }

      /* ===== CUA ===== */
      .crab {
        width: 150px;
        position: absolute;
        bottom: 5px;
      }

      /* ===== RONG BIỂN ===== */
      .seaweed {
        width: 150px;
        height: 150px;
        position: absolute;
        bottom: 0;
        animation: wave 3s ease-in-out infinite alternate;
      }
      @keyframes wave {
        from {
          transform: rotate(4deg);
        }
        to {
          transform: rotate(-4deg);
        }
      }

      /* ===== BONG BÓNG ===== */
      .bubble {
        position: absolute;
        bottom: 0;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.6);
        animation: bubbleRise 5s linear infinite;
      }
      @keyframes bubbleRise {
        0% {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
        100% {
          transform: translateY(-550px) scale(1.5);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <div class="aquarium">
      <!-- ÁNH SÁNG -->
      <div class="light"></div>

      <!-- THỢ LẶN -->
      <img class="diver" src="diver.png" />

      <!-- CÁ -->
      <img class="fish" src="Ca1.png" style="top: 20px" />
      <img class="fish" src="Ca1.png" style="top: 170px" />
      <img class="fish" src="Ca1.png" style="top: 260px" />

      <!-- CUA -->
      <img class="crab" src="crab.png" />

      <!-- RONG BIỂN -->
      <img class="seaweed" src="seaweed.png" style="left: 20px" />
      <img class="seaweed" src="seaweed.png" style="left: 120px" />
      <img class="seaweed" src="seaweed.png" style="left: 250px" />
      <img class="seaweed" src="seaweed.png" style="left: 425px" />
      <img class="seaweed" src="seaweed.png" style="left: 600px" />
      <img class="seaweed" src="seaweed.png" style="left: 720px" />
      <img class="seaweed" src="seaweed.png" style="left: 830px" />

      <!-- KHU VỰC BONG BÓNG -->
      <div id="bubbles"></div>
    </div>

    <script>
      /* =====================================================
   HÀM DI CHUYỂN TỰ NHIÊN (THỢ LẶN + CÁ)
===================================================== */
      function createMovement(element, speed = 1.5, verticalMotion = true) {
        let direction = Math.random() > 0.5 ? 1 : -1;
        let x = Math.random() * 700;
        let y = parseFloat(element.style.top) || 200;

        function move() {
          x += direction * speed;

          // Dao động lên xuống
          if (verticalMotion) {
            y += Math.sin(Date.now() / 250) * 0.4;
            element.style.top = y + "px";
          }

          element.style.left = x + "px";

          const maxX = 900 - element.width;

          // Chạm tường → quay đầu
          if (x <= 0 || x >= maxX) {
            direction *= -1;
            element.style.transform = "scaleX(" + direction + ")";
          }

          // Đổi hướng ngẫu nhiên (như cá thật)
          if (Math.random() < 0.002) {
            direction *= -1;
            element.style.transform = "scaleX(" + direction + ")";
          }

          requestAnimationFrame(move);
        }

        move();
      }

      /* =====================================================
   CUA DI CHUYỂN
===================================================== */
      function createCrabMovement(element, speed = 1.2) {
        let direction = Math.random() > 0.5 ? 1 : -1;
        let x = Math.random() * 700;

        function move() {
          x += direction * speed;
          element.style.left = x + "px";

          const maxX = 900 - element.width;

          if (x <= 0 || x >= maxX) {
            direction *= -1;
            element.style.transform = "scaleX(" + direction + ")";
          }
          requestAnimationFrame(move);
        }

        move();
      }

      /* =====================================================
   ÁP DỤNG CHUYỂN ĐỘNG
===================================================== */

      // Thợ lặn
      createMovement(document.querySelector(".diver"), 1.1);

      // Tất cả cá
      document.querySelectorAll(".fish").forEach((f) => {
        createMovement(f, 1 + Math.random() * 2);
      });

      // Cua
      createCrabMovement(document.querySelector(".crab"), 1.3);

      /* =====================================================
   TẠO BONG BÓNG LIÊN TỤC
===================================================== */
      const bubbleContainer = document.getElementById("bubbles");

      function createBubble() {
        let b = document.createElement("div");
        b.className = "bubble";
        b.style.left = Math.random() * 850 + "px";
        b.style.animationDuration = 4 + Math.random() * 2 + "s";
        bubbleContainer.appendChild(b);

        setTimeout(() => b.remove(), 6000);
      }

      setInterval(createBubble, 400);
    </script>
  </body>
</html>
